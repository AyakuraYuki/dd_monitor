(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d63f1"],{7277:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"dashboard container-fluid",attrs:{id:"dashboard"}},[i("div",{staticClass:"row"},[i("div",{staticClass:"sidebar col-md-2 d-none d-md-block sidebar p-3 d-none d-lg-block",attrs:{id:"sidebar"}},[i("b-nav",{staticClass:"nav-pills",attrs:{vertical:""}},[i("b-nav-item",{staticClass:"p-1"},[i("b-button",{attrs:{block:"",variant:"primary"},on:{click:t.fetchLinkList}},[t._v("Refresh")])],1),i("b-nav-item",{staticClass:"p-1"},[i("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.edit-link",modifiers:{"edit-link":!0}}],attrs:{block:"",variant:"success"},on:{click:t.createLink}},[t._v("\n                        Add Stream\n                    ")])],1),i("b-nav-item",{staticClass:"p-1"},[i("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.add-channel",modifiers:{"add-channel":!0}}],attrs:{block:"",variant:"info"}},[t._v("\n                        Add Channel\n                    ")])],1)],1)],1),i("main",{staticClass:"col-md-9 ml-sm-auto col-lg-10 pt-3 px-4",attrs:{role:"main"}},[t._m(0),i("b-table",{attrs:{striped:"",borderless:"",responsive:"sm",items:t.linkList,fields:t.fields,"head-variant":"dark"},scopedSlots:t._u([{key:"[options]",fn:function(e){return[i("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.edit-link",modifiers:{"edit-link":!0}}],staticClass:"btn-sm bg-info text-light",on:{click:function(i){return t.editLink(e.item,"PUT")}}},[t._v("\n                        Edit\n                    ")]),t._v("\n                    Â \n                    "),i("b-button",{staticClass:"btn-sm bg-danger text-light",on:{click:function(i){return t.deleteLink(e.item._id)}}},[t._v("\n                        Delete\n                    ")])]}}])})],1),i("modal-edit-link",{attrs:{item:t.modalEdit.item,method:t.modalEdit.method},on:{"update:linkList":t.fetchLinkList}}),i("modal-save-link-by-channel",{on:{"update:linkList":t.fetchLinkList}})],1)])},l=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3 border-bottom"},[i("h1",{staticClass:"h2 text-muted"},[t._v("Stream List")]),i("div",{staticClass:"btn-toolbar mb-2 mb-md-0"},[i("div",{staticClass:"btn-group mr-2"},[i("button",{staticClass:"btn btn-sm btn-outline-secondary d-md-none"},[t._v("+")])])])])}],a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("b-modal",{attrs:{centered:"",id:"edit-link",title:t.modalTitle(),size:"lg","ok-title":"Save","cancel-title":"Cancel"},on:{ok:t.save}},[i("form",{ref:"saveForm"},[t.link._id?i("b-form-input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],model:{value:t.link._id,callback:function(e){t.$set(t.link,"_id",e)},expression:"link._id"}}):t._e(),i("b-form-group",{attrs:{"label-for":"title-input"}},[i("b-input-group",{staticClass:"mt-3",attrs:{prepend:"Title"}},[i("b-form-input",{attrs:{id:"title-input"},model:{value:t.link.title,callback:function(e){t.$set(t.link,"title",e)},expression:"link.title"}})],1)],1),i("b-form-group",{attrs:{"label-for":"link-input"}},[i("b-input-group",{staticClass:"mt-3",attrs:{prepend:"Link"}},[i("b-form-input",{attrs:{id:"link-input"},model:{value:t.link.link,callback:function(e){t.$set(t.link,"link",e)},expression:"link.link"}})],1)],1),t.link._id?i("b-form-group",{attrs:{"label-for":"sort-input"}},[i("b-input-group",{staticClass:"mt-3",attrs:{prepend:"Sort"}},[i("b-form-input",{attrs:{id:"sort-input",type:"number"},model:{value:t.link.sort,callback:function(e){t.$set(t.link,"sort",e)},expression:"link.sort"}})],1)],1):t._e()],1)])},s=[],o=i("4ec3");const r=({query:t})=>{const e="/_/link",i={};return""!==t&&(i.query=t),o["a"].get(e,{params:i})},d=({title:t,link:e})=>{const i="/_/link";return o["a"].post(i,{title:t,link:e})},c=({title:t,channel:e})=>{const i="/_/link/save/channel";return o["a"].post(i,{title:t,channel:e})},m=(t,{title:e,link:i,sort:n})=>{const l=`/_/link/lid/${t}`;return o["a"].put(l,{title:e,link:i,sort:n})},u=t=>{const e=`/_/link/lid/${t}`;return o["a"].delete(e)};var p={name:"ModalEditLink",props:{method:String,item:{}},data(){return{link:{}}},watch:{item(t){this.handleLink(t)}},methods:{handleLink(t){this.link={_id:t&&t._id?t._id:0,title:t&&t.title?t.title:"",link:t&&t.link?t.link:"",sort:t&&t.sort?t.sort:1}},save(){this.method&&("POST"===this.method?d(this.link).then(()=>{this.$emit("update:linkList")}):"PUT"===this.method&&m(this.link._id,this.link).then(()=>{this.$emit("update:linkList")}))},modalTitle(){return this.item&&this.item._id?"Edit stream":"Add stream"}}},k=p,b=i("2877"),h=Object(b["a"])(k,a,s,!1,null,"7716baea",null),f=h.exports,v=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("b-modal",{attrs:{centered:"",id:"add-channel",title:"Add Channel",size:"lg","ok-title":"Save","cancel-title":"Cancel"},on:{ok:t.save,cancel:t.cleanup,close:t.cleanup}},[i("form",{ref:"saveByChannelForm"},[i("b-form-group",{attrs:{"label-for":"title-input"}},[i("b-input-group",{staticClass:"mt-3",attrs:{prepend:"Title"}},[i("b-form-input",{attrs:{id:"title-input",placeholder:"Title or description of Stream"},model:{value:t.post.title,callback:function(e){t.$set(t.post,"title",e)},expression:"post.title"}})],1)],1),i("b-form-group",{attrs:{"label-for":"channel-input"}},[i("b-input-group",{staticClass:"mt-3",attrs:{prepend:"YouTube Channel Id"}},[i("b-form-input",{attrs:{id:"channel-input",placeholder:"For example: UC-hM6YJuNYVAmUWxeIr9FeA (also support full channel link)"},model:{value:t.post.channel,callback:function(e){t.$set(t.post,"channel",e)},expression:"post.channel"}})],1)],1)],1)])},L=[],_={name:"ModalSaveLinkByChannel",data(){return{post:{title:"",channel:""}}},methods:{save(){c(this.post).then(()=>{this.cleanup(),this.$emit("update:linkList")})},cleanup(){this.post.title="",this.post.channel=""}}},C=_,g=Object(b["a"])(C,v,L,!1,null,"48e5e9cc",null),x=g.exports,w={name:"Dashboard",components:{ModalEditLink:f,ModalSaveLinkByChannel:x},data(){return{form:{query:""},fields:{title:{label:"Description"},link:{label:"Link"},options:{label:"Options"}},linkList:[],modalEdit:{item:{},method:""}}},methods:{fetchLinkList(){r({...this.form}).then(t=>{let e=t.data;this.linkList=e.list})},deleteLink(t){u(t).then(()=>{this.fetchLinkList()})},editLink(t,e){this.modalEdit.item=t,this.modalEdit.method=e},createLink(){this.editLink(void 0,"POST")}},mounted(){this.fetchLinkList(),document.body.classList.remove("bg-dark")}},$=w,y=Object(b["a"])($,n,l,!1,null,"26a5349a",null);e["default"]=y.exports}}]);